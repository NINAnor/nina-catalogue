<OGRVRTDataSource>
    <OGRVRTLayer name="{{ core.type }}">
    {% if core.type == 'event' %}
      <SrcDataSource><![CDATA[
        <OGRVRTDataSource>
        <OGRVRTLayer name="event">
          <SrcDataSource>CSV:/vsizip/{/vsicurl/{{ source }}}/event.txt</SrcDataSource>
          <LayerSRS>WGS84</LayerSRS>
        </OGRVRTLayer>
        <OGRVRTLayer name="occurrence">
          <SrcDataSource>CSV:/vsizip/{/vsicurl/{{ source }}}/occurrence.txt</SrcDataSource>
          <LayerSRS>WGS84</LayerSRS>
        </OGRVRTLayer>
        </OGRVRTDataSource>]]>
      </SrcDataSource>
      <SrcSQL>select * from occurrence left join event on event.eventID=occurrence.eventID</SrcSQL>
    {% elif core.type == 'occurrence' %}
      <SrcDataSource>CSV:/vsizip/{/vsicurl/{{ source }}}/occurrence.txt</SrcDataSource>
    {% endif %}
      <GeometryField encoding="PointFromColumns" x="decimalLongitude" y="decimalLatitude">
        <GeometryType>wkbPoint</GeometryType>
      </GeometryField>
    </OGRVRTLayer>
  </OGRVRTDataSource>
